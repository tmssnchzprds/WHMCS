function initStripeACH(){var e,t,n,i,a=jQuery("#frmPayment");a.length&&(jQuery("#inputBankAcctType").closest("div.form-group").slideUp().remove(),jQuery("#inputBankRoutingNum").closest("div.form-group").slideUp().remove(),jQuery("#inputBankName").closest("div.form-group").slideUp().remove(),jQuery("#inputBankAcctNum").closest("div.form-group").slideUp().remove(),jQuery("#billingAddressChoice").closest("div.form-group").slideUp().remove(),e=jQuery("#btnSubmitContainer"),t=jQuery('input[name="paymethod"]:checked').val(),a.off("submit"),e.find("button").addClass("disabled").prop("disabled",!0),jQuery("#inputDescriptionContainer").after('<div class="form-group row bank-details">\n    <label for="inputBankDetails" class="col-sm-4 control-label">\n        \n    </label>\n    <div class="col-sm-6">\n        <button type="button" class="btn btn-default form-control" id="inputBankDetails">            <i class="fal fa-plus-circle"></i> Add Bank Information        </button>    </div>\n</div><div id="mandateAcceptanceContainer" class="form-group bank-details">\n    <div class="alert alert-info" id="mandateAcceptance">\n'+lang.mandate_acceptance+"    </div>\n</div>"),n="#inputBankDetails",i=jQuery(n),"new"===t?(i.not(":visible")&&i.show("fast"),jQuery(document).on("click",n,handler_open)):(i.is(":visible")&&i.hide("fast"),jQuery(document).off("click",n),e.find("button").removeClass("disabled").prop("disabled",!1)),jQuery('input[name="paymethod"]').on("ifChecked",function(){i=jQuery("#inputBankDetails"),"new"===jQuery(this).val()?(e.find("button").addClass("disabled").prop("disabled",!0),jQuery(document).on("click",n,handler_open)):(i.is(":visible")&&i.hide("fast"),jQuery(document).off("click",n),e.find("button").removeClass("disabled").prop("disabled",!1))}))}function stripe_ach_reset_input_to_new(){jQuery('input[name="paymethod"][value="new"]').iCheck("check"),setTimeout(function(){jQuery(".gateway-errors").slideUp()},4e3)}function handler_open(e){e.preventDefault();var n=jQuery("#frmPayment"),i=jQuery(".gateway-errors").first(),e=jQuery("#inputBankAcctHolderName").val();e?stripeACH.collectBankAccountForSetup({clientSecret:clientToken,params:{payment_method_type:"us_bank_account",payment_method_data:{billing_details:{name:e,email:clientEmail}}},expand:["payment_method"]}).then(({setupIntent:e,error:t})=>{t?(i.html(t.message),i.not(":visible")&&i.slideDown(),scrollToGatewayInputError()):"requires_payment_method"===e.status?(i.html(lang.requires_payment_method),i.not(":visible")&&i.slideDown(),scrollToGatewayInputError()):"requires_confirmation"===e.status&&stripeACH.confirmUsBankAccountSetup(clientToken).then(({setupIntent:e,error:t})=>{t?(i.html(t.message),i.not(":visible")&&i.slideDown(),scrollToGatewayInputError()):"requires_payment_method"===e.status?(i.html(lang.requires_payment_method),i.not(":visible")&&i.slideDown(),scrollToGatewayInputError()):"succeeded"!==e.status&&"verify_with_microdeposits"!==e.next_action?.type||((t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name","remoteStorageToken"),t.setAttribute("value",e.id),n.append(t),(e=jQuery("#inputBankDetails")).is(":visible")&&e.hide("fast"),jQuery("#inputBankAcctHolderName").attr("readonly",!0),n.submit())})}):(i.html(lang.account_holder_name_required),i.not(":visible")&&i.slideDown(),scrollToGatewayInputError())}